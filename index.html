<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        Eth2 Medalla Data Analysis - HackMD
    </title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
    <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css" integrity="sha256-QiWfLIsCT02Sdwkogf6YMiQlj4NE84MKkzEMkZnMGdg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
        @charset "UTF-8";@import url(https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i|Source+Code+Pro:300,400,500|Source+Sans+Pro:300,300i,400,400i,600,600i|Source+Serif+Pro&subset=latin-ext);.hljs{display:block;background:#fff;padding:.5em;color:#333;overflow-x:auto}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-string,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#0086b3}.hljs-built_in,.hljs-builtin-name{color:#005cc5}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#795da3}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.markdown-body{font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e7e7e7;border:0}.markdown-body blockquote{font-size:16px;padding:0 1em;color:#777;border-left:.25em solid #ddd}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd,.popover kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#777}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{padding:0;list-style-type:none}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{padding-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{letter-spacing:-.2em;content:"\00a0"}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:700;background:#f8f8f8;border-top:0}.news .alert .markdown-body blockquote{padding:0 0 0 40px;border:0 none}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle;cursor:default!important}.markdown-body{padding-top:40px;padding-bottom:40px;max-width:758px;overflow:visible!important;position:relative}.markdown-body .emoji{vertical-align:top}.markdown-body pre{border:inherit!important}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{text-align:right;position:relative;display:inline-block;cursor:default;z-index:4;padding:0 8px 0 0;min-width:20px;box-sizing:content-box;color:#afafaf!important;border-right:3px solid #6ce26c!important}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-left:none;border-top:none;border-bottom:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-spacing:0;border-collapse:inherit!important}.markdown-body code[data-gist-id]{background:none;padding:0}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{overflow:unset;margin-bottom:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram,.markdown-body pre.vega{text-align:center;background-color:inherit;border-radius:0;white-space:inherit;overflow:visible}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code,.markdown-body pre.vega>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg,.markdown-body pre.vega>svg{max-width:100%;height:100%}.markdown-body pre>code.wrap{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.markdown-body .alert>p,.markdown-body .alert>ul{margin-bottom:0}.markdown-body summary{display:list-item}.markdown-body summary:focus{outline:none}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none}.markdown-body figure{margin:1em 40px}.markdown-body .mark,.markdown-body mark{background-color:#fff1a7}.vimeo,.youtube{cursor:pointer;display:table;text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;background-color:#000;overflow:hidden}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{width:100%;object-fit:contain;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{width:100%;height:100%;position:absolute;top:0;left:0}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{position:absolute;height:auto;width:auto;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;opacity:.3;transition:opacity .2s;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.MJX_Assistive_MathML{display:none}#MathJax_Message{z-index:1000!important}.ui-infobar{position:relative;z-index:2;max-width:760px;margin:25px auto -25px;color:#777}.toc .invisable-node{list-style-type:none}.ui-toc{position:fixed;bottom:20px;z-index:998}.ui-toc.both-mode{margin-left:8px}.ui-toc.both-mode .ui-toc-label{height:40px;padding:10px 4px;border-top-left-radius:0;border-bottom-left-radius:0}.ui-toc-label{background-color:#e6e6e6;border:none;color:#868686;transition:opacity .2s}.ui-toc .open .ui-toc-label{opacity:1;color:#fff;transition:opacity .2s}.ui-toc-label:focus{opacity:.3;background-color:#ccc;color:#000}.ui-toc-label:hover{opacity:1;background-color:#ccc;transition:opacity .2s}.ui-toc-dropdown{margin-top:20px;margin-bottom:20px;padding-left:10px;padding-right:10px;max-width:45vw;width:25vw;max-height:70vh;overflow:auto;text-align:inherit}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{padding-right:0;letter-spacing:.0029em}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{display:block;padding:4px 20px;font-size:13px;font-weight:500;color:#767676}.ui-toc-dropdown .nav>li:first-child:last-child > ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{padding-left:19px;color:#000;text-decoration:none;background-color:transparent;border-left:1px solid #000}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{padding-right:19px;border-left:none;border-right:1px solid #000}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{padding-left:18px;font-weight:700;color:#000;background-color:transparent;border-left:2px solid #000}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{padding-right:18px;border-left:none;border-right:2px solid #000}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:40px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{padding-left:28px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{padding-left:38px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif}html[lang^=ja] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html .markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html .markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html .markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html[lang^=ja] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html[lang=zh-tw] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html[lang=zh-cn] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}html .ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html .ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html .ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}.ui-affix-toc{position:fixed;top:0;max-width:15vw;max-height:70vh;overflow:auto}.back-to-top,.expand-toggle,.go-to-bottom{display:block;padding:4px 10px;margin-top:10px;margin-left:10px;font-size:12px;font-weight:500;color:#999}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{width:20px;height:20px;display:block;border-radius:50%;margin-top:2px;margin-bottom:2px;margin-right:5px;background-position:50%;background-repeat:no-repeat;background-size:cover}.ui-user-icon.small{width:18px;height:18px;display:inline-block;vertical-align:middle;margin:0 0 .2em}.ui-infobar>small>span{line-height:22px}.ui-infobar>small .dropdown{display:inline-block}.ui-infobar>small .dropdown a:focus,.ui-infobar>small .dropdown a:hover{text-decoration:none}.ui-more-info{color:#888;cursor:pointer;vertical-align:middle}.ui-more-info .fa{font-size:16px}.ui-connectedGithub,.ui-published-note{color:#888}.ui-connectedGithub{line-height:23px;white-space:nowrap}.ui-connectedGithub a.file-path{color:#888;text-decoration:none;padding-left:22px}.ui-connectedGithub a.file-path:active,.ui-connectedGithub a.file-path:hover{color:#888;text-decoration:underline}.ui-connectedGithub .fa{font-size:20px}.ui-published-note .fa{font-size:20px;vertical-align:top}.unselectable{-webkit-user-select:none;-o-user-select:none;user-select:none}.selectable{-webkit-user-select:text;-o-user-select:text;user-select:text}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{position:relative;z-index:1;color:#222}.markdown-body.slides:before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;background-color:currentColor;box-shadow:0 0 0 50vw}.markdown-body.slides section[data-markdown]{position:relative;margin-bottom:1.5em;background-color:#fff;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{position:absolute;top:50%;left:1em;right:1em;transform:translateY(-50%);max-height:100%;overflow:hidden}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{content:"";position:absolute;top:-1.5em;right:1em;height:1.5em;border:3px solid #777}.site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;text-shadow:0 0 1em transparent,1px 1px 1.2px rgba(0,0,0,.004);-webkit-overflow-scrolling:touch;letter-spacing:.025em;font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] body{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}abbr[data-original-title],abbr[title]{cursor:help}body.modal-open{overflow-y:auto;padding-right:0!important}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid comment-inner comment-enabled" data-hard-breaks="true"><h1 id="Eth2-Medalla---a-data-driven-deep-dive" data-id="Eth2-Medalla---a-data-driven-deep-dive"><a class="anchor hidden-xs" href="#Eth2-Medalla---a-data-driven-deep-dive" title="Eth2-Medalla---a-data-driven-deep-dive"><span class="octicon octicon-link"></span></a><span>Eth2 Medalla - a data driven deep dive</span></h1><p><em><span>A journey through the underbelly of eth2’s final call before takeoff.</span></em></p><p><em><span>By </span><a href="https://twitter.com/eliasimos" target="_blank" rel="noopener"><span>Elias Simos</span></a><span> and </span><a href="https://twitter.com/sidshekhar24" target="_blank" rel="noopener"><span>Sid Shekhar</span></a><span>.</span></em></p><p><strong><span>About this work:</span></strong><span> Elias is a Protocol Specialist at Bison Trails. Sid leads Blockchain Research at Coinbase. This report was an independent collaborative research effort to review the overall performance of the Medalla Testnet, answering the EF’s call for submissions on the eth2 Medalla data challenge.</span></p><p><em><span>All data, scripts, and notebooks that powered this analysis are available on </span><a href="https://github.com/eth2data/eth2data.github.io/" target="_blank" rel="noopener"><span>github</span></a><span>. The majority of the data we used came from the Prysm API via </span><a href="https://github.com/gobitfly/eth2-beaconchain-explorer" target="_blank" rel="noopener"><span>beaconcha.in</span></a><span>.</span></em></p><h2 id="Table-of-Contents" data-id="Table-of-Contents"><a class="anchor hidden-xs" href="#Table-of-Contents" title="Table-of-Contents"><span class="octicon octicon-link"></span></a><span>Table of Contents</span></h2><p><span class="toc"><ul>
<li><a href="#Eth2-Medalla---a-data-driven-deep-dive" title="Eth2 Medalla - a data driven deep dive">Eth2 Medalla - a data driven deep dive</a><ul>
<li><a href="#Table-of-Contents" title="Table of Contents">Table of Contents</a></li>
<li><a href="#Highlights" title="Highlights">Highlights</a></li>
<li><a href="#Benchmarking-Client-Performance" title="Benchmarking Client Performance">Benchmarking Client Performance</a></li>
<li><a href="#Validator-Groupings" title="Validator Groupings">Validator Groupings</a><ul>
<li><a href="#Data-structures-in-eth2-related-to-validator-identity" title="Data structures in eth2 related to validator identity">Data structures in eth2 related to validator identity</a></li>
<li><a href="#Grouping-results" title="Grouping results">Grouping results</a></li>
</ul>
</li>
<li><a href="#Big-Picture" title="Big Picture">Big Picture</a><ul>
<li><a href="#Network-growth-over-time" title="Network growth over time">Network growth over time</a></li>
<li><a href="#Epochs-2000-to-4000-a-rough-time-for-Medalla" title="Epochs 2000 to 4000; a rough time for Medalla">Epochs 2000 to 4000; a rough time for Medalla</a></li>
<li><a href="#Slashings" title="Slashings">Slashings</a></li>
<li><a href="#Defining-normality-missed-to-proposed-blocks" title="Defining normality: missed-to-proposed blocks">Defining normality: missed-to-proposed blocks</a></li>
</ul>
</li>
<li><a href="#Network-Health" title="Network Health">Network Health</a><ul>
<li><a href="#Aggregate-inclusion-delay" title="Aggregate inclusion delay">Aggregate inclusion delay</a></li>
<li><a href="#Detected-to-total-slashable-offences" title="Detected to total slashable offences">Detected to total slashable offences</a></li>
<li><a href="#Finality-distance" title="Finality distance">Finality distance</a></li>
</ul>
</li>
<li><a href="#Aggregation-Performance" title="Aggregation Performance">Aggregation Performance</a><ul>
<li><a href="#Committee-growth-over-time" title="Committee growth over time">Committee growth over time</a></li>
<li><a href="#Attestations-included-on-chain" title="Attestations included on-chain">Attestations included on-chain</a></li>
</ul>
</li>
<li><a href="#Validator-Effectiveness" title="Validator Effectiveness">Validator Effectiveness</a><ul>
<li><a href="#Proposer-effectiveness" title="Proposer effectiveness">Proposer effectiveness</a></li>
<li><a href="#Attester-effectiveness" title="Attester effectiveness">Attester effectiveness</a></li>
</ul>
</li>
<li><a href="#Conclusion" title="Conclusion">Conclusion</a></li>
<li><a href="#Helpful-Resouces" title="Helpful Resouces">Helpful Resouces</a></li>
<li><a href="#Acknowledgements" title="Acknowledgements">Acknowledgements</a></li>
</ul>
</li>
</ul>
</span></p><h2 id="Highlights" data-id="Highlights"><a class="anchor hidden-xs" href="#Highlights" title="Highlights"><span class="octicon octicon-link"></span></a><span>Highlights</span></h2><ul>
<li><span>We were able to group together ~</span><strong><span>85% of all validators in Medalla</span></strong><span>. Over 2/3 of all the validators on the network are concentrated between at most 22 groups, many of which we were able to identify as developers, infrastructure providers and Staking as a Service firms. While we weren’t able to directly identify exchanges or custodians, we singled out 4 entities that could fit the profile.</span></li>
<li><span>We were further able to identify the client choice of </span><strong><span>over 1/3 of the network’s validators</span></strong><span>. As expected, Prysm takes the lions share, with Lighthouse improving the most over the 14500 epochs we investigated, and looking ready to contend.</span></li>
<li><span>We provide a definition for “normal” vs “abnormal” network conditions. </span><strong><span>Under “normal” conditions, 3/4 of block slots available were proposed and 1/4 was missed.</span></strong><span> The distribution of proposed blocks per client  matched the overall distrubution of clients, while in the distribution of missed slots per client, Nimbus features a lot more prominently.</span></li>
<li><strong><span>Client syncing issues</span></strong><span> have been the most probable root cause for over </span><strong><span>90% of attester and proposer slashings</span></strong><span> in Medalla. All attester slashings were attributed to double votes, most of which shared the same source and target epoch. We observed no penalties enforced for surrounding voting.</span></li>
<li><span>We introduce </span><code>aggregate inclusion delay</code><span> as a novel metric of overall network  health. Over the period we study, Medalla improved significantly on that front, reducing its aggregate inclusion delay from a high of 15 slots to 5 under normal network conditions - a 66% decrease!</span></li>
<li><span>We also introduce a novel visualization of time to finality we baptized </span><code>finality distance</code><span>, for past blockchain states.</span></li>
<li><span>We further introduce </span><code>attestations bloat</code><span> as the number of attestations included on chain, in excess of one per activated validator, per epoch. Over Medalla’s lifecycle, the </span><strong><span>aggregate attestations bloat stands at over 110%</span></strong><span> - meaning that it is likely that the chain ingests a lot of “waste”.</span></li>
<li><span>We further define measures of </span><code>proposer effectiveness</code><span> and </span><code>attester effectivenes</code><span> - based on average inclusion lag, uptime and valuable-to-total attestations included on chain over a validator’s lifecycle.</span></li>
<li><span>A validator in eth2 Phase 0 gets rewarded for keeping good uptime and getting votes included as fast as possible. We believe that in order to see more client diversity, the protocol should reward more types of positive behaviour, such as efficient aggregation.</span></li>
<li><span>Although a lot of progress has been made, the tooling is still young. For reference, we were most likely the first party to use the paid version of the </span><a href="http://beaconcha.in" target="_blank" rel="noopener"><span>beaconcha.in</span></a><span> API (4M requests per month) and managed to uncover a bug that corrupted the attestations dataset. The team has since pushed a </span><a href="https://github.com/gobitfly/eth2-beaconchain-explorer/commit/ac5061c1e3c74ebf02f9cc193fefc71577121041" target="_blank" rel="noopener"><span>fix</span></a><span>.</span></li>
</ul><blockquote style="border-left-color: rgb(144, 123, 247);">
<p><strong><span>Fun Fact:</span></strong><span> In order to make our </span><a href="https://github.com/eth2data/eth2data.github.io/tree/main/notebooks" target="_blank" rel="noopener"><span>notebooks</span></a><span> easy to understand and follow, we processed all of the medalla chain data in-memory, using an ultra high memory VM (900 GB RAM) for the job. The size of the attestations dataset alone was 6.6 GB (as of Oct 15th) in CSV format .</span><br>
<span class="color" data-color="#907bf7"></span></p>
</blockquote><h2 id="Benchmarking-Client-Performance" data-id="Benchmarking-Client-Performance"><a class="anchor hidden-xs" href="#Benchmarking-Client-Performance" title="Benchmarking-Client-Performance"><span class="octicon octicon-link"></span></a><span>Benchmarking Client Performance</span></h2><p><span>We ran and tested out 4 main Ethereum 2.0 beacon chain clients - Lighthouse, Prysm, Nimbus, and Teku - to see how performance differs across them.</span></p><p><strong><span>Setup</span></strong></p><p><span>All 4 clients were launched on virtual machines on Google Cloud - hosted in the europe-west-1-b (London) region.</span></p><p><span>The machines were general purpose E2 machine type with 32 vCPUs (Intel Skylake) and 128 GB memory. We also attached a 1024 GB SSD persistent disk to each VM to allow for ample data storage space and optimal I/O. The host systems were all running Ubuntu 18.04 LTS (from the ubuntu-1804-bionic-v20200923 image managed by Google).</span></p><p><span>To emulate a semi-professional validator set up, we ran each client on a separate VM instance and also ran Eth1 Geth nodes on the same instance as the beacon chain client so as to minimize dependency on Infura or external network factors.</span></p><p><strong><span>Client Versions</span></strong></p><ul>
<li><span>Lighthouse - v0.2.13 built from source on Oct 7th 23:30 UTC using Make</span></li>
<li><span>Prysm - v1.0.0-alpha.28 built using installation script on Oct 7th 14:00 UTC</span></li>
<li><span>Nimbus - beacon_node v0.5.0 from source on Oct 10th 00:00 UTC using Make</span></li>
<li><span>Teku - v0.12.10 built from source on Oct 11th 23:00 UTC using Gradle</span></li>
</ul><p><strong><span>Initial Synchronization Times</span></strong></p><ul>
<li><span>Lighthouse: 5 hours &amp; 27 minutes</span></li>
<li><span>Prysm: 8 hours &amp; 27 minutes</span></li>
<li><span>Nimbus: 28 hours &amp; 11 minutes</span></li>
<li><span>Teku: 24 hours &amp; 16 minutes</span></li>
</ul><p><img src="https://i.imgur.com/7TZh47h.png" alt=""></p><p><span>Some interesting points of note regarding our experience with the 4 different clients:</span></p><ul>
<li><span>The Lighthouse client was by far the fastest Beacon Chain client in terms of initial sync time (followed by Prysm a few hours later). However one anecdotal observation we came to, was that in our instance it disconnected from the local Geth node after the sync period and we had to manually restart the Lighthouse systemd service (on which the node was configured) in order to re-establish connectivity.</span></li>
<li><span>By scanning through the Nimbus logs (available </span><a href="https://" target="_blank" rel="noopener"><span>here</span></a><span>), we saw that over the course of the sync duration (~1 day and 4 hours), there were 260 times when the syncing progress stopped progressing and the queue had to be reset. The node seems to recover fine from these instances so overall performance does not seem to be adversely impacted too much.</span></li>
<li><span>A somewhat similar pattern was found within the Teku node logs, which indicated that during 1376 different instances during the syncing process (which took 1 day and 16 minutes), the head block update was skipped as the justified checkpoint was updated while loading checkpoint state. Similar to Nimbus, this does not seem to have had a discernible effect on sync speed or performance as syncing resumed shortly thereafter.</span></li>
<li><span>No discernible difference in CPU or Memory usage was found across clients with our default set up.</span></li>
</ul><p><em><span>We will drill down into performance of validators per client later.</span></em></p><h2 id="Validator-Groupings" data-id="Validator-Groupings"><a class="anchor hidden-xs" href="#Validator-Groupings" title="Validator-Groupings"><span class="octicon octicon-link"></span></a><span>Validator Groupings</span></h2><p><span>Before we get into overall network and validator performance, it is useful to outline the approach we took when grouping network participants and briefly discuss the outcomes. This will help us sketch out relative performance of different groups that participated in the Testnet later on, untangling the aggregates into the sum of (some of) the network’s parts.</span></p><h3 id="Data-structures-in-eth2-related-to-validator-identity" data-id="Data-structures-in-eth2-related-to-validator-identity"><a class="anchor hidden-xs" href="#Data-structures-in-eth2-related-to-validator-identity" title="Data-structures-in-eth2-related-to-validator-identity"><span class="octicon octicon-link"></span></a><span>Data structures in eth2 related to validator identity</span></h3><p><span>The </span><code>public_key</code><span> is a unique identifier for a validator - equivalent to an eth1 address. It corresponds to a </span><code>private_key</code><span> that is used to sign messages, and a publicly visible </span><code>validator_index</code><span> that can be interchangeable with a chosen </span><code>name</code><span> identifier.</span></p><p><span>The </span><code>withdrawal_credentials</code><span> field, on the other hand, relates to a hash of the public key that will be used to withdraw funds from the validator. The design of eth2, allows participants to map withdrawal_credentials to multiple validators ( described by </span><code>index</code><span> and </span><code>pubkey</code><span>), in order to make it easier to withdraw funds from multiple validators at once (see </span><a href="http://beaconcha.in" target="_blank" rel="noopener"><span>beaconcha.in</span></a><span>’s post for a deeper dive into key structure in eth2, </span><a href="https://kb.beaconcha.in/ethereum-2-keys" target="_blank" rel="noopener"><span>here</span></a><span>).</span></p><p><img src="https://i.imgur.com/FfcnvI9.jpg" alt=""></p><p><span>Validator pubkeys also map to </span><code>eth1 addresses</code><span> that are used to fund the validator with ETH. This the address that a staker will use to transfer funds into the escrow contract, in order to participate in Phase 0 of eth2.</span></p><p><span>Finally, when signing blocks a proposer can include a string to the block that will be publicly visible to the network - called </span><code>graffiti</code><span>. We have observed that a sizeable number of proposers choose to use the graffiti field to signal pieces of their identity to the rest of the network.</span></p><p><img src="https://i.imgur.com/lcc6wQg.jpg" alt=""></p><p><span>Given the publicly available information, the main avenues we took in order to group network participants were mapping</span></p><p><span>(i) </span><code>withdrawal_credentials</code><span> to </span><code>validatorindex</code><span>,</span><br>
<span>(ii) </span><code>eth1 deposit addresses</code><span> to </span><code>validatorindex</code><span>,</span><br>
<span>(iii) </span><code>name</code><span> to </span><code>withdrawal_credentials</code><span>, and (iv) </span><code>graffiti</code><span> to </span><code>validatorindex</code><span>.</span></p><h3 id="Grouping-results" data-id="Grouping-results"><a class="anchor hidden-xs" href="#Grouping-results" title="Grouping-results"><span class="octicon octicon-link"></span></a><span>Grouping results</span></h3><p><span>The two main categories that we found the most interesting in this segmentation exercise were:</span></p><ol>
<li><span>Grouping by client software.</span></li>
<li><span>Grouping by operator.</span></li>
</ol><p><span>The data for (1) came predominantly from the </span><code>graffiti</code><span> field of proposed blocks, while for (2) we first mapped </span><code>withdrawal_credential</code><span> to </span><code>validatorindex</code><span> and then proceeded to add names, and </span><code>eth1 address</code><span> commonalities to the same grouping.</span></p><p><span>When grouping by client, we managed to identify roughly ⅓ of all validators in Medalla. In that group, ~65% are running on a Prysm client, 25% on Lighthouse and the remainder is evenly split between Nimbus and Teku - with a small fraction (&lt;1%) running on Lodestar. Given the client performance we noted in the previous section, we view the results as…unsurprising.</span></p><p><img src="https://i.imgur.com/sGrNprO.png" alt=""></p><p><span>Now, when grouping by operator the results get a lot more interesting! What we found is that over 25% of the validators on Medalla can be linked back to 4 core groups, and 75% of the validators to ONLY 22 groups. Among those, we were able to discern a few known Staking-as-a-Service outfits, possibly the Ethereum Foundation, and a handful of client software development organizations.</span></p><p><img src="https://i.imgur.com/RC440Nx.png" alt=""></p><p><span>When overlaying our grouping by client to the top-30 identified groups, we were able to uncover only about 15% of the client choices the top operators have made - not enough to come to serious conclusions about what the leading validator groups are running.</span></p><p><img src="https://i.imgur.com/NjfY6A3.png" alt=""></p><p><span>Where we got some very interesting results was in mapping the same top-30 operators to their </span><code>pubkey : withdrawal_credential</code><span> choice. In this view we were able to segment between 2 distinct groups - those that spawned 1 </span><code>withdrawal_credential</code><span> per </span><code>validatorindex</code><span>, and those that opted for spawning only a handful (most often just one) withdrawal credentials, for the whole set of validators they ran.</span></p><p><img src="https://i.imgur.com/vBPys1w.jpg" alt=""></p><p><span>A couple of key insights from this view that we think are worth highlighting is that in the one-to-one group (red above), the top players are likely highly programmatic in the way they manage their withdrawal keys. Given some of their identities, these are more likely to be entities that will support staking services or infrastructure in a </span><em><span>non-custodial</span></em><span> manner.</span></p><p><span>Conversely in the many-to-one set, 3 out of 4 groups that we were able to proxy an identity for (the 1st set of validators to activate in Medalla - likely associated with the </span><a href="https://ethereum.org/en/foundation/" target="_blank" rel="noopener"><span>Ethereum Foundation</span></a><span>, </span><a href="https://www.rocketpool.net/" target="_blank" rel="noopener"><span>Rocketpool</span></a><span> and </span><a href="https://stakewise.io/" target="_blank" rel="noopener"><span>Stakewise</span></a><span>), are single entities that are more likely to manage validator deposits in a </span><em><span>custodial</span></em><span> manner - either from Treasury (EF) or from a Staking Pool (Stakewise, Rocketpool).</span></p><p><span>If we assume that the 4 unidentified groups in the many-to-one set also are planning to operate in a custodial manner, but would rather conceal their identity, we could further assume that their real identity maps to an institutional or near-institutional player that holds customer funds - such as an exchange or a large custodian!</span></p><div class="alert alert-info">
<p><img class="emoji" alt=":bulb:" src="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/images/basic/bulb.png"><span> </span><strong><span>Key Takeaway</span></strong><span>: If this is true, given that the number of these types of players in the market is far larger than “just” four, it could be a nod towards a non-committal strategy (i.e. wait and see) towards eth2 from that category of market participant.</span></p>
</div><h2 id="Big-Picture" data-id="Big-Picture"><a class="anchor hidden-xs" href="#Big-Picture" title="Big-Picture"><span class="octicon octicon-link"></span></a><span>Big Picture</span></h2><p><span>The analysis we did here captures </span><code>epochs [0, 14572]</code><span> which map to </span><code>slots [0, 466,335]</code><span> - a time window that corresponds to approximately the beginning of Medalla (Aug 4th, 2020) to the first half of October 2020 (8th).</span></p><p><span>Over the course of this window, over 78,846 unique validator indices became active on Medalla. The maximum number of activated validators observed stands at 72,554 and the maximum amount of staked Testnet ETH, stood at 2.35M.`</span></p><p><span>Of the total slots that became available,  334,484 [71%] were </span><code>proposed</code><span> as intended by the protocol, 127,172 [27%] were </span><code>missed</code><span> and 4,800 [2%] were </span><code>orphaned</code><span>.</span></p><p><span>Further, we observed 1009 </span><code>voluntary exits</code><span> and 5,186 </span><code>slashings</code><span> - 46 of which were </span><code>proposer slashings</code><span> and 5140 were </span><code>attester slashings</code><span>. These roughly map to 0.0132% of total proposals and 0.001% of valuable attestations.</span></p><h3 id="Network-growth-over-time" data-id="Network-growth-over-time"><a class="anchor hidden-xs" href="#Network-growth-over-time" title="Network-growth-over-time"><span class="octicon octicon-link"></span></a><span>Network growth over time</span></h3><p><img src="https://i.imgur.com/8ryAX5o.jpg" alt=""></p><p><span>27% of the validators that were active over the Testnet’s life cycle were activated on </span><code>epoch 0</code><span>.  In eth2 ⅔ of activated validators need to get valuable attestations included by block proposers (i.e. attestations that are rewarded by the protocol), in order for the chain to be finalized (i.e. the state of the chain becomes “set in stone”). This means that the threshold for finality at the start of Medalla stood at ~13.3k valuable attestations.</span></p><p><span>From that point onwards, it was a steady rise for the activated validator count; roughly 10k validators were added to Medalla every 2000 epoch’s (~9 days). Interestingly though while more validators were deployed, no new significant entities/groups entered the Testnet at its later stages - with the notable exception of the group we were able to map to a Rocketpool affiliated entity that first entered around epoch 14,000. In fact, from the Top-20 groups by deployed validators, most entered before epoch 5,000 and a large majority were active since Genesis.</span></p><h3 id="Epochs-2000-to-4000-a-rough-time-for-Medalla" data-id="Epochs-2000-to-4000-a-rough-time-for-Medalla"><a class="anchor hidden-xs" href="#Epochs-2000-to-4000-a-rough-time-for-Medalla" title="Epochs-2000-to-4000-a-rough-time-for-Medalla"><span class="octicon octicon-link"></span></a><span>Epochs 2000 to 4000; a rough time for Medalla</span></h3><p><span>A glaring exception in the steady growth pattern of activated validators, is the window between epoch 2,000 and epoch 4,000 - the period in which the roughtime incident took place. We recommend Raul Jordan’s breakdown of the incident for more context around it </span><a href="https://medium.com/prysmatic-labs/eth2-medalla-testnet-incident-f7fbc3cc934a" target="_blank" rel="noopener"><span>here</span></a><span>.</span></p><p><span>A quick look at the count of ETH deposits over time, gives us a clearer view of the network interruption during the incident; no deposits took place approx. between </span><code>epochs [2200, 3500]</code><span>, while we are observing a similar density of deposits at Testnet start, and at Testnet “re-start”.</span></p><p><img src="https://i.imgur.com/QP63RHW.jpg" alt=""></p><p><span>While no new validators were added on Medalla during the roughtime incident, attesters were getting slashed; in fact, 94% of the total attester slashings took place in the window between</span><code>epochs [2000, 4000]</code><span>.</span></p><p><img src="https://i.imgur.com/7mM446D.jpg" alt=""></p><h3 id="Slashings" data-id="Slashings"><a class="anchor hidden-xs" href="#Slashings" title="Slashings"><span class="octicon octicon-link"></span></a><span>Slashings</span></h3><p><span>At this point, it’s worth hitting pause for a minute and defining both what slashing is, and the conditions under which a network participant in eth2 might get slashed. Slashing is a core protocol function and mechanism enabler in PoS networks. In very crude terms, if block rewards are the “carrot”, slashing is the “stick” - a negative incentive to keep network participants from misbehaving.</span></p><p><span>In eth2, slashing is predominantly the fate of those validators that either (i) double attest, or (ii) surround vote - attesting to two different versions of chain state.</span></p><p><span>The Casper FFG paper outline the two slashing conditions as follows:</span></p><ul>
<li><code>Double vote</code><span> – when a validator votes for two different blocks during the same epoch or two conflicting votes getting included in the chain.</span></li>
<li><code>Surround vote</code><span> – a vote with source and target surrounding or surrounded by previously made vote, such that</span>
<ul>
<li><span>s2 &gt; s1 and t2 &lt; t1, or</span></li>
<li><span>s1 &lt; s2 &lt; t2 &lt; t1</span></li>
</ul>
</li>
</ul><p><img src="https://i.imgur.com/XrQSw1O.jpg" alt=""></p><p><span>During the roughtime event, as client clocks went out of sync with network time, attesters started issuing votes that had a large delta between </span><code>source</code><span> and </span><code>target</code><span> epoch (over 40 epochs, while the protocol is targeting for 2). While surveying the slashings that took place during roughtime, we were able to link most to the </span><code>double voting</code><span> condition.</span></p><p><img src="https://i.imgur.com/hGuxGbg.jpg" alt=""></p><p><span>More specifically, over 90% of the attester slashings recorded in Medalla were double votes, with the same </span><code>source</code><span> and </span><code>target</code><span> epochs but different </span><code>target slot</code><span> in the same </span><code>epoch</code><span>. Another 8% of the double vote slashings were attestations that disagreed both in the </span><code>target slot</code><span> and </span><code>source</code><span> epoch fields. Double vote slashings due to pure asynchrony in </span><code>checkpoint</code><span> values was a much less frequent phenomenon, with less than 1% of the slashings being attributable to it. Over the whole dataset of 5,134 attester slashings we were unable to locate any enforced that satisfied the </span><code>surround vote</code><span> conditions.</span></p><p><img src="https://i.imgur.com/PrD8YgL.jpg" alt=""></p><p><span>Proposer slashings are a little more straight forward than attester slashings and center around </span><code>double proposals</code><span> of blocks. In Medalla, these have been few and far between, with the majority concentrated around </span><code>epoch 13,700</code><span>. Our initial thought was that this was either due to a bug, or a client software upgrade that included a better “slasher” module.</span></p><p><img src="https://i.imgur.com/Qttykvw.jpg" alt=""></p><p><span>After inspecting both the proposers that included the proofs and the proposers that got slashed, we think that the former is more likely as there was no evident pattern in the </span><code>whistleblower</code><span> client type (we were able to map about 30% of those). We were, however, able to map the slashed proposers to an overwhelming majority running the Nimbus client.</span></p><p><span>Off the slashed proposers in Medalla ~60% were wearing Nimbus, and when zooming in to the high density proposer slashing epoch range, that percentage grew to over 85%. We are aware that some sync bugs reared their heads in Nimbus, as attention of stakers turned from Medalla to Zinken (a period outside the scope of our dataset), and we think it’s likely that this was the cause of the proposer slashings here.</span></p><p><img src="https://i.imgur.com/QfUjMkc.png" alt=""></p><div class="alert alert-info">
<p><img class="emoji" alt=":bulb:" src="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/images/basic/bulb.png"><span> </span><strong><span>Key Takeaway</span></strong><span>: Overall, as we were able to attribute the majority of slashings in Medalla to their most probable root causes, it becomes apparent that client syncing issues (specifically with Prysm during roughtime and Nimbus around epoch 13,700) have been the most common source of malaise for validators in the Testnet.</span></p>
</div><h3 id="Defining-normality-missed-to-proposed-blocks" data-id="Defining-normality-missed-to-proposed-blocks"><a class="anchor hidden-xs" href="#Defining-normality-missed-to-proposed-blocks" title="Defining-normality-missed-to-proposed-blocks"><span class="octicon octicon-link"></span></a><span>Defining normality: missed-to-proposed blocks</span></h3><p><span>Looking at the ratio of </span><code>missed : proposed blocks per epoch</code><span> - over time, it becomes apparent that the bulk of attester slashings took place under “abnormal” network conditions. During the roughtime incident and for a period of approx. 1,500 epochs (1 week), 75% of the slots available to block proposers, were </span><code>missed</code><span>. Without enough blocks being proposed, the network could not achieve finality for a prolonged period of time.</span></p><p><img src="https://i.imgur.com/WtbwmFS.jpg" alt=""></p><p><span>The above view, coarse as it may be, is an opportunity to define the distinction between “normal” and “abnormal” network conditions. In a perfect world, 100% of the block slots available would be proposed - helping the network to continue moving in perpetuity, all activated attesters would vote and so on; alas, the world is not perfect - but it can still be “normal”!</span></p><p><span>When plotting out the distributions of </span><code>missed</code><span> and </span><code>proposed</code><span> block </span><code>slots</code><span> over the set of epoch’s we’re basing this analysis on, we found that they both follow approximately normal distributions, with fat tails left and right that capture the essence of “abnormal” network conditions, like the roughtime incident.</span></p><p><img src="https://i.imgur.com/SPacATq.jpg" alt=""></p><p><img src="https://i.imgur.com/O6iJ2un.jpg" alt=""></p><div class="alert alert-info">
<p><img class="emoji" alt=":bulb:" src="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/images/basic/bulb.png"><span> </span><strong><span>Key Takeaway</span></strong><span>: When excluding the roughtime incident (the fat tail) from the set of observations - broadly </span><code>epochs (2000, 4000)</code><span>, we found that under “normal” conditions, Medalla clocked at 3:1 </span><code>proposed : missed</code><span> slots! This means that in every epoch, 24 slots were proposed and 7 were missed on average.</span></p>
</div><p><span>At this point, it’s also worth noting that under “normal” conditions the </span><code>uncle rate</code><span> for Medalla stood at roughly 1% of all block slots per epoch - a stark contrast to the ~5% on average that eth1.x produces.</span></p><p><span>The rate of </span><code>orphaned</code><span> blocks (correct blocks that do not make it on the canonical chain due to latency issues in the P2P layer of the network - i.e. the message doesn’t make it on time) remained stable over the course of the Testnet, with notable spikes around the beginning of the roughtime incident, and at around epoch 13,700, when the network appears to have experienced another short spurt of high latency, leading to both 70% of the blocks being </span><code>orphaned</code><span> for the duration of an epoch and more than 60% of all block slots being </span><code>missed</code><span> a few epochs later.</span></p><p><img src="https://i.imgur.com/cN9KERA.jpg" alt=""></p><p><span>The above observations raise a set of important questions around the stability of the network, its overall performance vs its benchmarks, and its ability to self-correct in “unstable” times. In order to be better able to judge when the protocol penalises participants for misbehaviour, it is useful to define the parameters that govern “network health”.</span></p><p><span>We explore those in the following section.</span></p><h2 id="Network-Health" data-id="Network-Health"><a class="anchor hidden-xs" href="#Network-Health" title="Network-Health"><span class="octicon octicon-link"></span></a><span>Network Health</span></h2><p><span>At a high enough level, the purpose of eth2 is to be a source of truth. In order to fulfil its purpose effectively, the protocol deploys an incentive structure (staking) to engage and align a varied set of network participants in a game of truth-telling.</span></p><div class="alert alert-info">
<p><img class="emoji" alt=":bulb:" src="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/images/basic/bulb.png"><span> </span><strong><span>Key Takeaway</span></strong><span>: A healthy network then, is a network in which the participants tell the truth at a much higher rate than not telling, or lying - and do so in perpetuity.</span></p>
</div><p><span>To unpack this a little more, there are four key components that define “desired behaviour”  among network participants, that stem from the above statement:</span></p><ol>
<li><span>The participants should “speak”</span></li>
<li><span>They should tell the “truth” when they “speak”,</span></li>
<li><span>They must do so round-after-round and remain incentivized to do so - trusting that the game they are playing is fair.</span></li>
<li><span>They must agree “enough” on aggregate so that other participants and/or observers are able to reference events that are recorded in network history as “truth”.</span></li>
</ol><p><span>With this in mind, we take a step beyond the </span><code>missed : proposed</code><span> blocks ratio and dive deeper into the following key components of network health - (i) the aggregate inclusion delay, (ii) detected to total slashable offences and (ii) finalization distance.</span></p><h3 id="Aggregate-inclusion-delay" data-id="Aggregate-inclusion-delay"><a class="anchor hidden-xs" href="#Aggregate-inclusion-delay" title="Aggregate-inclusion-delay"><span class="octicon octicon-link"></span></a><span>Aggregate inclusion delay</span></h3><p><span>The </span><code>inclusion delay</code><span> is a key moderating factor to the reward an attester stands to achieve by voting on blocks (see a post from </span><a href="http://beaconcha.in" target="_blank" rel="noopener"><span>beaconcha.in</span></a><span> for an overview of how this works, </span><a href="https://kb.beaconcha.in/attestation/attestation-rewards" target="_blank" rel="noopener"><span>here</span></a><span>). By protocol rules, the quickest an attester can get their vote in on block </span><code>n</code><span>, is on block </span><code>n+1</code><span> - which means that the inclusion delay is at minimum 1. If they manage to do so, they stand to win the maximum attester reward. For every additional block the inclusion is delayed, the rewards reduce.</span></p><p><span>Given the above, the “aggregate” inclusion delay across the whole set of attesters over time can give us a good view into how efficiently the body of attesters is performing their given tasks - and abstracting this a little further, how much of their rewards potential they are fulfilling over time.</span></p><p><img src="https://i.imgur.com/sKsivYa.jpg" alt=""></p><p><img src="https://i.imgur.com/9yFqjtn.jpg" alt=""></p><p><span>In the aggregated view above, we looked at the whole set of attestations that were submitted on the Tesnet and their respective inclusion delays, calculating the average delays per epoch, per validator.</span></p><p><span>While pre-roughtime the aggregate inclusion delay ranged between 5 and 15 block slots (possibly because of the same clock synchronization issues that caused the roughtime incident), post-roughtime the aggregate inclusion delay smoothed out over time - from an average of 9 slots in epoch 4,000 to approximately 4 by epoch 14,700.</span></p><h3 id="Detected-to-total-slashable-offences" data-id="Detected-to-total-slashable-offences"><a class="anchor hidden-xs" href="#Detected-to-total-slashable-offences" title="Detected-to-total-slashable-offences"><span class="octicon octicon-link"></span></a><span>Detected to total slashable offences</span></h3><p><em><span>Starting out, our goal here was to arrive at a ratio of detected-to-slashable offences, by surveying all proposals and attestations for slashable offences and comparing those to the events that were actually included on-chain. While we were able to do so for a small subset of epochs, due to resource and time constraints we weren’t able to replicate this over the whole dataset - but strongly encourage further research in this area.</span></em></p><p><em><span>We will attempt to close the loop here and backfill when we do.</span></em></p><h3 id="Finality-distance" data-id="Finality-distance"><a class="anchor hidden-xs" href="#Finality-distance" title="Finality-distance"><span class="octicon octicon-link"></span></a><span>Finality distance</span></h3><p><span>As a reminder </span><code>finality</code><span> is a state the chain achieves, where a block (and its contents - e.g. transactions) cannot any more be changed without a large percentage of stake getting destroyed. Eth2 guarantees finality, with a target of </span><code>2 epochs</code><span> to reach it, at any given point in time.</span></p><p><span>Our goal in this section was to create a view where we could visualize when valuable attestations that help eth2 achieve finality, get included on-chain. In order to do this, we took the dataset of total grouped attestations, disaggregated them, found which ones were included first (valuable attestations), and measured the delta between </span><code>target epoch</code><span> and </span><code>epoch included</code><span> on-chain. We then compare that to the required threshold for finality - measured as 2/3 of activated validators in any given epoch.</span></p><p><img src="https://i.imgur.com/exuWuYd.png" alt=""></p><p><span>From the above, it is clear that pre-roughtime Medalla was able to finalize within the target 2 epochs for over 80% of the time. However, as roughtime kicked in the problem becomes crystal clear - between epochs </span><code>[2500, 3200]</code><span> Medalla could barely get 15% of the total valuable attestations necessary to achieve finality included!</span></p><p><span>While we haven’t gotten access to data on validator effective balances over time, it is fair to assume that during roughtime, the network’s </span><code>inactivity leak</code><span> penalty started kicking in, wreaking havoc among the inactive validators - which at the time represented more than 85% of activated validators.</span></p><p><span>When the network re-started, and for a period roughly 4500 epochs Medalla was finalizing within 3+ epochs consistently, and it took until about epoch </span><code>11800</code><span> to start finalizing in the 2 epoch desired window again.</span></p><h2 id="Aggregation-Performance" data-id="Aggregation-Performance"><a class="anchor hidden-xs" href="#Aggregation-Performance" title="Aggregation-Performance"><span class="octicon octicon-link"></span></a><span>Aggregation Performance</span></h2><p><span>Aggregation in eth2, is the act of collecting valuable network information from the P2P layer (rumor) and packaging it together in order to submit it on chain, in an efficient way. At a high level, it is the work that some of the attester nodes perform in each consensus round and it involves hashing together individual attestation signatures that are broadcasted by other nodes in the P2P network, and submitting them as a group to the block proposer for inclusion in the chain.</span></p><p><img src="https://i.imgur.com/cBuCRg8.png" alt=""></p><p><span>It also happens that attestations are the consensus function that takes up the most chain space  - especially in Phase 0 when no transactions will take place on-chain!</span></p><div class="alert alert-info">
<p><img class="emoji" alt=":bulb:" src="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/images/basic/bulb.png"><span> </span><strong><span>Key Takeaway</span></strong><span>:  It then follows that aggregation is not only helpful, but rather a </span><em><span>vital</span></em><span> protocol function in an eth2 chain that is designed for </span><em><span>scalability</span></em><span>.</span></p>
</div><p><span>Broadly, there are two ways to go about figuring out the value of a transaction after it has happened; you either look at the account balance of the “sender” to see how much his total balance has reduced, or you look at the account of the “receiver” to find how much its balance has increased. In a similar fashion, in order to understand the effectiveness of aggregations in eth2, we can either look at the source directly (P2P layer), or look at the outcome that has printed on-chain. Given that we weren’t able to access a meaningful enough historical dataset from the P2P layer, we opted for the latter.</span></p><h3 id="Committee-growth-over-time" data-id="Committee-growth-over-time"><a class="anchor hidden-xs" href="#Committee-growth-over-time" title="Committee-growth-over-time"><span class="octicon octicon-link"></span></a><span>Committee growth over time</span></h3><p><span>Taking a step back to add some context, according to protocol rules, every activated validator is allocated an attestation slot at every epoch the protocol recognizes them as “activated”. The attesters are further organized in </span><code>committees</code><span>, and within those committees some are chosen as </span><code>aggregators</code><span>. The minimum committee size that the protocol targets is 128 attesters, and the maximum is ~5,000. It then follows that as the activated validator set increases, so will the number of committees.</span></p><p><span>Indeed, as more validators entered Medalla the aggregate committee size per target slot increased relatively linearly with them - starting from 4 committees per slot at start (~20k validators) and reaching up to 17 per slot at the end of the analysis window. This maps to growth equivalent to 128 unique committees per epoch at start and 544 unique committees per epoch at the end, with the average validators on committee per epoch reducing from 156 to 137.</span></p><p><img src="https://i.imgur.com/tgtUYTj.jpg" alt=""></p><p><span>As expected, the step pattern that committee growth followed over time, appears broken at times of “abnormal” network conditions. Indeed the two most significant subsets of the whole, map exactly on epochs that over 70% of blocks were missed!</span></p><h3 id="Attestations-included-on-chain" data-id="Attestations-included-on-chain"><a class="anchor hidden-xs" href="#Attestations-included-on-chain" title="Attestations-included-on-chain"><span class="octicon octicon-link"></span></a><span>Attestations included on-chain</span></h3><p><span>While when zoomed-out at the committee level the picture looks like one of growth and prosperity, zooming in to the individual attestations that were committed on-chain over the duration of Medalla, a rather odd picture starts to form.</span></p><p><span>In order to arrive at this view, we disaggregated all aggregated attestations and counted the number of unique </span><code>validator indices</code><span> that map to each unique committee - defined by its </span><code>target slot</code><span> and </span><code>committee index</code><span>. What we found, we did not exactly expect…</span></p><p><img src="https://i.imgur.com/ITjwV36.jpg" alt=""></p><p><img src="https://i.imgur.com/JnMiFOc.jpg" alt=""></p><p><span>The two views above, represent the disaggregated attester votes found in unique committees over time - per </span><code>target slot</code><span> and per epoch. A quick scan points to the fact that from the start, Medalla included a lot more attester votes on chain than activated validators. Both the ratio of </span><code>attestations included on chain : activated validators</code><span>, and an abbreviated table view taken from a set of random epochs marks agree.</span></p><p><img src="https://i.imgur.com/jBn2CNZ.jpg" alt=""></p><p><img src="https://i.imgur.com/EIEtNB0.png" alt=""></p><p><span>While once again, across another key indicator of network performance things appear to have improved after the roughtime incident, it appears that between epochs 4,000 and 14,700 the </span><code>attestations bloat</code><span> - a metric we define as the delta of the included attestations per slot (or epoch) and the maximum expected valuable attestations given the set of activated validators, stood at over 100%.</span></p><p><span>Discounted for our finite knowledge of protocol rules, as pure observers, we see two possible reasons for this:</span></p><p><span>(i) hyperactive attesters and</span><br>
<span>(ii) ineffective aggregators.</span></p><p><span>Both link straight back to the client software the nodes are running on.</span></p><p><span>Getting a little more granular, we filtered the dataset for duplicate attestation inclusions within the </span><em><span>same</span></em><span> </span><code>unique committee</code><span> per </span><code>target slot</code><span>. We found that in the period until epoch </span><code>3000</code><span>, approximately 40-50 duplicate attestations were included within the same unique committee - a 30% surplus to the average committee size in the period.</span></p><p><img src="https://i.imgur.com/7x61Qwe.jpg" alt=""></p><p><span>Note that given our definition of </span><code>unique comittee</code><span> it is highly likely that none of these surplus inclusions represent undetected slashable offences!</span></p><p><span>When investigating the distribution of these double votes, however, we found that none were included within the same aggregate attestation - implying that the protocol, at least at this level, is working as intended.</span></p><p><span>Given the sheer size of the dataset of aggregated (and then disaggregated) attestations, improving aggregation, both on the client side and possibly the protocol side - from our perspective - appears to be table stakes.</span></p><div class="alert alert-info">
<p><img class="emoji" alt=":bulb:" src="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/images/basic/bulb.png"><span> </span><strong><span>Key Takeaway</span></strong><span>: A more effective aggregation process, not only means less chain bloat and more space for useful information to be stored, but also directly enhances protocol security and overall guarantees, by allowing whistleblowers to survey past history for protocol level violations faster (and cheaper).</span></p>
</div><h2 id="Validator-Effectiveness" data-id="Validator-Effectiveness"><a class="anchor hidden-xs" href="#Validator-Effectiveness" title="Validator-Effectiveness"><span class="octicon octicon-link"></span></a><span>Validator Effectiveness</span></h2><p><span>Validators in eth2 are rewarded for proposing, attesting and whistleblowing. The bulk of the rewards in Phase 0 of eth2, will come from attestations. While the individual rewards of proposing blocks far exceed those of attestations, given that every active validator is called upon to attest once in every epoch, this means that the bulk of the total rewards for validators in eth2, comes from attestations!</span></p><p><span>In this section we define measures of </span><code>proposer effectiveness</code><span> and </span><code>attester effectiveness</code><span>, and then proceed to score client and operator groupings against those.</span></p><h3 id="Proposer-effectiveness" data-id="Proposer-effectiveness"><a class="anchor hidden-xs" href="#Proposer-effectiveness" title="Proposer-effectiveness"><span class="octicon octicon-link"></span></a><span>Proposer effectiveness</span></h3><p><span>In the grand scheme of things, being a </span><code>proposer</code><span> in eth2 is like a party round for consensus participants. The protocol picks 32 block proposers at every epoch, that are tasked with committing all the attestations (and later transaction data) on chain and finalising a block. They are, in fact, the proverbial tip of the spear in the body of “truth speakers” that make up the network.</span></p><p><span>The probability of becoming a proposer in Phase 0, all else equal, is then </span><code>32/n</code><span> - where </span><code>n</code><span> is the total number of activated validators on the network. As the number of network participants grows, the probability of proposing a block diminishes; and so it did in Medalla!</span></p><p><img src="https://i.imgur.com/Igu6WK9.png" alt=""></p><p><span>All things considered, we believe there is still merit in thinking along the lines of </span><code>proposer effectiveness</code><span>, even if becoming one is a low probability event. While the infrastructure and best practices (e.g. keeping uptime) to run an effective proposer and an effective attester are virtually identical, we feel this is an overlooked area of study that might hold learnings for both the protocol and the infrastructure layer of eth2.</span></p><p><span>The obvious way to score for proposer effectiveness is a simple ratio on </span><code>blocks missed : blocks proposed</code><span>. However, given that validators entered Medalla at different points in time, however, we must control for the time each validator has been active (measured in </span><code>epochs</code><span>). But just controlling for time active, doesn’t capture the diminishing probability of being selected as one, as the total set of activated validators increases. We then introduce a further optimization in the ratio to capture the difficulty factor - by dividing the time weighted ratio with the </span><code>probability of proposing at least once</code><span>, given a validator’s activation epoch in the Testnet. This is the inverse of the probability that they got allocated 0 slots over the epochs they have been active for  (</span><code>n</code><span>) - such that:</span></p><p><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-3-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>P</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>p</mi><mn>1</mn></msub><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mn>1</mn><mo>&amp;#x2212;</mo><mi>P</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>p</mi><mn>0</mn></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mi>n</mi></msup></math>" role="presentation" style="font-size: 118%; position: relative;"><span id="MJXc-Node-1" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-2" class="mjx-mrow"><span id="MJXc-Node-3" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.479em; padding-bottom: 0.267em; padding-right: 0.109em;">P</span></span><span id="MJXc-Node-4" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.479em; padding-bottom: 0.585em;">(</span></span><span id="MJXc-Node-5" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-6" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.215em; padding-bottom: 0.479em;">p</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-7" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.373em; padding-bottom: 0.32em;">1</span></span></span></span><span id="MJXc-Node-8" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.479em; padding-bottom: 0.585em;">)</span></span><span id="MJXc-Node-9" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.056em; padding-bottom: 0.32em;">=</span></span><span id="MJXc-Node-10" class="mjx-mn MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.373em; padding-bottom: 0.32em;">1</span></span><span id="MJXc-Node-11" class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.32em; padding-bottom: 0.426em;">−</span></span><span id="MJXc-Node-12" class="mjx-mi MJXc-space2"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.479em; padding-bottom: 0.267em; padding-right: 0.109em;">P</span></span><span id="MJXc-Node-13" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.479em; padding-bottom: 0.585em;">(</span></span><span id="MJXc-Node-14" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-15" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.215em; padding-bottom: 0.479em;">p</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span id="MJXc-Node-16" class="mjx-mn" style=""><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.373em; padding-bottom: 0.373em;">0</span></span></span></span><span id="MJXc-Node-17" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-18" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.479em; padding-bottom: 0.585em;">)</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span id="MJXc-Node-19" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.215em; padding-bottom: 0.267em;">n</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><mo>−</mo><mi>P</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mn>0</mn></msub><msup><mo stretchy="false">)</mo><mi>n</mi></msup></math></span></span><script type="math/tex" id="MathJax-Element-3">P(p_1) = 1 - P(p_0)^n</script></span></p><p><span>A more accurate approach, would be to compute the probability that the proposer would be allocated the average number of proposer slots that a random validator achieved from the proposers entry to </span><code>epoch t</code><span>.</span></p><p><span>Plotted over ~14,700 epochs, it looks like this:</span></p><p><img src="https://i.imgur.com/wLAIdty.png" alt=""></p><p><span>With this in mind, we proceeded to give all validators active in Medalla a proposer effectiveness score (</span><code>PES</code><span>), such that:</span></p><p><span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-4-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>P</mi><mi>E</mi><mi>S</mi><mo>=</mo><mfrac><mrow><mo stretchy=&quot;false&quot;>(</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x2211;</mo></mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>p</mi><mi>o</mi><mi>s</mi><mi>e</mi><mi>d</mi><mo>&amp;#x2212;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x2211;</mo></mrow><mi>m</mi><mi>i</mi><mi>s</mi><mi>s</mi><mi>e</mi><mi>d</mi><mo stretchy=&quot;false&quot;>)</mo></mrow><mfrac><mi>n</mi><mrow><mo stretchy=&quot;false&quot;>(</mo><mi>P</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>p</mi><mn>1</mn></msub><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo></mrow></mfrac></mfrac></math>" role="presentation" style="font-size: 118%; position: relative;"><span id="MJXc-Node-20" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-21" class="mjx-mrow"><span id="MJXc-Node-22" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.479em; padding-bottom: 0.267em; padding-right: 0.109em;">P</span></span><span id="MJXc-Node-23" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.479em; padding-bottom: 0.267em; padding-right: 0.026em;">E</span></span><span id="MJXc-Node-24" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.479em; padding-bottom: 0.32em; padding-right: 0.032em;">S</span></span><span id="MJXc-Node-25" class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.056em; padding-bottom: 0.32em;">=</span></span><span id="MJXc-Node-26" class="mjx-mfrac MJXc-space3"><span class="mjx-box MJXc-stacked" style="width: 7.71em; padding: 0px 0.12em;"><span class="mjx-numerator" style="font-size: 70.7%; width: 10.903em; top: -1.633em;"><span id="MJXc-Node-27" class="mjx-mrow" style=""><span id="MJXc-Node-28" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.479em; padding-bottom: 0.585em;">(</span></span><span id="MJXc-Node-29" class="mjx-texatom"><span id="MJXc-Node-30" class="mjx-mrow"><span id="MJXc-Node-31" class="mjx-mo"><span class="mjx-char MJXc-TeX-size1-R" style="padding-top: 0.532em; padding-bottom: 0.532em;">∑</span></span></span></span><span id="MJXc-Node-32" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.215em; padding-bottom: 0.479em;">p</span></span><span id="MJXc-Node-33" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.215em; padding-bottom: 0.267em;">r</span></span><span id="MJXc-Node-34" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.215em; padding-bottom: 0.267em;">o</span></span><span id="MJXc-Node-35" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.215em; padding-bottom: 0.479em;">p</span></span><span id="MJXc-Node-36" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.215em; padding-bottom: 0.267em;">o</span></span><span id="MJXc-Node-37" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.215em; padding-bottom: 0.267em;">s</span></span><span id="MJXc-Node-38" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.215em; padding-bottom: 0.267em;">e</span></span><span id="MJXc-Node-39" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.479em; padding-bottom: 0.267em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-40" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.32em; padding-bottom: 0.426em;">−</span></span><span id="MJXc-Node-41" class="mjx-texatom"><span id="MJXc-Node-42" class="mjx-mrow"><span id="MJXc-Node-43" class="mjx-mo"><span class="mjx-char MJXc-TeX-size1-R" style="padding-top: 0.532em; padding-bottom: 0.532em;">∑</span></span></span></span><span id="MJXc-Node-44" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.215em; padding-bottom: 0.267em;">m</span></span><span id="MJXc-Node-45" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.426em; padding-bottom: 0.267em;">i</span></span><span id="MJXc-Node-46" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.215em; padding-bottom: 0.267em;">s</span></span><span id="MJXc-Node-47" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.215em; padding-bottom: 0.267em;">s</span></span><span id="MJXc-Node-48" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.215em; padding-bottom: 0.267em;">e</span></span><span id="MJXc-Node-49" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.479em; padding-bottom: 0.267em; padding-right: 0.003em;">d</span></span><span id="MJXc-Node-50" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.479em; padding-bottom: 0.585em;">)</span></span></span></span><span class="mjx-denominator" style="font-size: 70.7%; width: 10.903em; bottom: -1.404em;"><span id="MJXc-Node-51" class="mjx-mfrac" style=""><span class="mjx-box MJXc-stacked" style="width: 2.517em; padding: 0px 0.12em;"><span class="mjx-numerator" style="font-size: 70.7%; width: 3.56em; top: -1.117em;"><span id="MJXc-Node-52" class="mjx-mi" style=""><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.215em; padding-bottom: 0.267em;">n</span></span></span><span class="mjx-denominator" style="font-size: 70.7%; width: 3.56em; bottom: -1.044em;"><span id="MJXc-Node-53" class="mjx-mrow" style=""><span id="MJXc-Node-54" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.479em; padding-bottom: 0.585em;">(</span></span><span id="MJXc-Node-55" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.479em; padding-bottom: 0.267em; padding-right: 0.109em;">P</span></span><span id="MJXc-Node-56" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.479em; padding-bottom: 0.585em;">(</span></span><span id="MJXc-Node-57" class="mjx-msubsup"><span class="mjx-base"><span id="MJXc-Node-58" class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.215em; padding-bottom: 0.479em;">p</span></span></span><span class="mjx-sub" style="vertical-align: -0.337em; padding-right: 0.05em;"><span id="MJXc-Node-59" class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.373em; padding-bottom: 0.32em;">1</span></span></span></span><span id="MJXc-Node-60" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.479em; padding-bottom: 0.585em;">)</span></span><span id="MJXc-Node-61" class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.479em; padding-bottom: 0.585em;">)</span></span></span></span><span class="mjx-line" style="border-bottom: 1.1px solid; top: -0.292em; width: 2.517em;"></span></span><span class="mjx-vsize" style="height: 1.528em; vertical-align: -0.738em;"></span></span></span><span class="mjx-line" style="border-bottom: 1.3px solid; top: -0.283em; width: 7.71em;"></span></span><span class="mjx-vsize" style="height: 2.148em; vertical-align: -0.993em;"></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mi>E</mi><mi>S</mi><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mrow class="MJX-TeXAtom-ORD"><mo>∑</mo></mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>p</mi><mi>o</mi><mi>s</mi><mi>e</mi><mi>d</mi><mo>−</mo><mrow class="MJX-TeXAtom-ORD"><mo>∑</mo></mrow><mi>m</mi><mi>i</mi><mi>s</mi><mi>s</mi><mi>e</mi><mi>d</mi><mo stretchy="false">)</mo></mrow><mfrac><mi>n</mi><mrow><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mfrac></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-4">PES = \frac{({\sum}proposed - {\sum}missed)}{\frac{n}{(P(p_1))}}</script></span></p><p><span>Armed with this, we went ahead and computed the </span><code>PES</code><span> score for all validators in Medalla and looked at how these aggregates stack up across the client and operator groupings we introduced earlier. The results are presented below.</span></p><h4 id="Performance-by-operator-grouping" data-id="Performance-by-operator-grouping"><a class="anchor hidden-xs" href="#Performance-by-operator-grouping" title="Performance-by-operator-grouping"><span class="octicon octicon-link"></span></a><em><span>Performance by operator grouping</span></em></h4><p><span>The group that we have mapped to Rocketpool scores at the top of the list, with a caveat in that since most of its validators have been around for only about 100 epochs, its performance is skewed disproportionately higher.</span></p><p><img src="https://i.imgur.com/c8cx3lj.png" alt=""></p><p><span>Surprisingly, in the top-20 we present above, 40% of the top performers is dominated by the unidentified parties we were able to group by their eth1 deposit addresses!</span></p><p><span>For reference, we present the blown out view of the distributions between total </span><code>proposed</code><span> and </span><code>missed</code><span> slots that the groupings by operator were involved in, below.</span></p><p><img src="https://i.imgur.com/4OJ8pBZ.png" alt=""></p><h4 id="Performance-by-client-grouping" data-id="Performance-by-client-grouping"><a class="anchor hidden-xs" href="#Performance-by-client-grouping" title="Performance-by-client-grouping"><span class="octicon octicon-link"></span></a><em><span>Performance by client grouping</span></em></h4><p><span>When only considering the time weighted score, Prysm edges ahead of Lighthouse, but when accounting for the probability of proposing at least once, Lighthouse seems ahead by a factor of 3 - even accounting for the fact that the on average, validators that we mapped to Lighthouse have been around for 2000 epochs more than those that run Prysm!</span></p><p><img src="https://i.imgur.com/BVSlv5m.png" alt=""></p><p><span>For reference, we present an aggregated view of slots </span><code>proposed</code><span> and </span><code>missed</code><span> we were able to group by client, below.</span></p><p><img src="https://i.imgur.com/bMyOsvd.png" alt=""></p><p><span>While the picture in slots proposed is equivalent to the distribution of validators by client, in slots missed we found that validators running Nimbus were once more the surprise leader, with the percentage of missed slots attributed to those being far greater than the percentage of the network they represent. Also, when looking at the cross-section between distributions and scores, Lodestar makes an appearance as the 3rd best performer - but with a tiny amount of the total distribution of slots allocated attributed to clients running it.</span></p><h3 id="Attester-effectiveness" data-id="Attester-effectiveness"><a class="anchor hidden-xs" href="#Attester-effectiveness" title="Attester-effectiveness"><span class="octicon octicon-link"></span></a><span>Attester effectiveness</span></h3><p><span>Broadly, the two key variables for attesters to optimize along in eth2 are (i) getting valuable attestations included (a function of uptime) and (ii) the inclusion lag. Inspired from Jim McDonald’s work on attestation effectiveness (see </span><a href="https://www.attestant.io/posts/defining-attestation-effectiveness/" target="_blank" rel="noopener"><span>here</span></a><span>) we have developed a methodology to rank validators along those metrics, based on disaggregating grouped attestations and then aggregating back at the </span><code>validatorindex</code><span> level.</span></p><p><span>The main categories we focused our analysis on are:</span></p><ol>
<li><code>aggregate inclusion delay</code><span> - measured as the average of inclusion lags a validator has been subject to over time. A score of 1 means that the validator always got their attestations in without a delay, and maximized their rewards potential.</span></li>
<li><code>uptime ratio</code><span> - measured as the number of valuable attestations vs the time a validator has been active (in epochs). A ratio of 1 implies that the validator has been reponsive in every round they have been called to attest in.</span></li>
<li><code>valuable : non-valuable attestations ratio</code><span> - measuring how many excess votes the validator got inlcuded on-chain. We use this as a proxy of how many excess messages the validator broadcasted.</span></li>
</ol><p><span>We also introduce an </span><code>attester effectiveness score</code><span>, by dividing the </span><code>uptime ratio * 100</code><span> by the </span><code>aggregate inclusion delay</code><span>.</span></p><p><span>Finally, we introduced two views to parts of the analysis - epochs </span><code>[0, 14500]</code><span> and epochs </span><code>[8000, 14500]</code><span>. Given that attestations happen much more frequently than proposals, we felt its important to control for performance under only “normal” network conditions, in the more mature stages of Medalla.</span></p><h4 id="Aggregate-performance" data-id="Aggregate-performance"><a class="anchor hidden-xs" href="#Aggregate-performance" title="Aggregate-performance"><span class="octicon octicon-link"></span></a><em><span>Aggregate performance</span></em></h4><p><img src="https://i.imgur.com/u9E8uI2.png" alt=""></p><p><code>epochs [0, 14500]</code></p><p><span>The average validator in Medalla has been around for 9245 epochs, has kept uptime for about 75% of the epochs they have been active for, submitted attestations with an inclusion delay of 5.4 slots (i.e. subject to only </span><a href="https://www.attestant.io/posts/defining-attestation-effectiveness/" target="_blank" rel="noopener"><span>20% of the max reward</span></a><span> available), lost 1 ETH on aggregate, and for every valuable attestation they produced they also got one more included on chain - the majority of which is likely wasted  chain state capacity.</span></p><p><img src="https://i.imgur.com/NZysmih.png" alt=""></p><p><span>A 70% negative correlation between attester effectiveness and validator age, implies that there was significant improvement in the average participant’s peformance as Medalla developed. We also observed a 50% correlation between our attester effectiveness metric and the ETH rewards achieved between epochs</span><code>[0, 14500]</code><span>.</span></p><p><span>When narrowing the set of validators to the initial 20k that became active at Genesis to control for time active, the correlation jumps to 75%. When further filtering for losses greater than 2 ETH to control for deprecated or slashed and exited validators, the correlation between attester effectiveness and total rewards earned, reaches 86%!</span></p><p><img src="https://i.imgur.com/wQAbed1.png" alt=""></p><p><span>Now, while the mean attester effectiveness score of 16 accross all the </span><code>validator_indices</code><span> in the dataset doesn’t express much in isolation, things get interesting when looking at its distribution.</span></p><p><img src="https://i.imgur.com/VKSKjoO.png" alt=""></p><p><code>epochs [0, 14500]</code></p><p><span>Even though there are a lot of validators performing near the average, 17% of the total is yielding a score of near 0 - implying that almost 1/5 of network participants are being negligent and are not keeping uptime, while being activated. The best part? This is good news!</span></p><div class="alert alert-info">
<p><img class="emoji" alt=":bulb:" src="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/images/basic/bulb.png"><span> </span><strong><span>Key Takeaway</span></strong><span>: Given Medalla is a Testnet with no real money at stake, there are no incentives for slackers to course-correct. Come Mainnet time, we think it’s fair to assume that the percentage of validators with near 0 effectiveness will reduce dramatically, bringing the aggregate effectiveness score closer to 23 - which would imply ~90% aggregate uptime accross the body of attesters.</span></p>
</div><h4 id="Performance-by-operator-grouping1" data-id="Performance-by-operator-grouping"><a class="anchor hidden-xs" href="#Performance-by-operator-grouping1" title="Performance-by-operator-grouping1"><span class="octicon octicon-link"></span></a><em><span>Performance by operator grouping</span></em></h4><p><img src="https://i.imgur.com/9LadZOY.png" alt=""><br>
<code>epochs [0, 14500]</code></p><p><span>Once again, among the top-30 performers we find several groups that we have been able to put together by their </span><code>eth1 deposit address</code><span> commonalities, but we haven’t been able to link to a more descriptive identity. What’s perhaps the most interesting observation here is that the average “age” of a validator within those groups is 2835 epochs - meaning that the top performers entered the game later, benefiting from normal network conditions, improved client software and all the learnings that the first 8k epochs in Medalla had to offer.</span></p><p><span>Many of these addresses (such as </span><code>0xe312</code><span>, </span><code>0x24cd</code><span> and </span><code>0xadcc</code><span>) represent groups of between 700 and 2000 validators - not exactly your average mom-and-pop shop. Surprisingly, the top performers by attester effectiveness score, also score at the top 10% of observations with respect to the </span><code>valuable : non-valuable attestations</code><span> ratio.</span></p><p><span>When surveying client choices of the top-30, we were able to map to approx. 1/3 of the subset (1700 validator indices), and found that the majority are running Prysm.</span></p><p><img src="https://i.imgur.com/RZgr8ZA.png" alt=""></p><p><span>All things considered, these are players highly optimized for performance at scale, and we can expect them to be the apex attesters come Mainnet time.</span></p><h4 id="Performance-by-client-grouping1" data-id="Performance-by-client-grouping"><a class="anchor hidden-xs" href="#Performance-by-client-grouping1" title="Performance-by-client-grouping1"><span class="octicon octicon-link"></span></a><em><span>Performance by client grouping</span></em></h4><p><img src="https://i.imgur.com/Rkq7UOK.png" alt=""><br>
<code>epochs [0, 14500]</code></p><p><span>Shifting the frame to grouping by client choice, it becomes clear why the majority of the Top-30 operator groups by attester effectiveness have chosen Prysm. Over epochs </span><code>[0, 14500]</code><span> and accross the ~25k validator indices we were able to link to client choice, Prysm has a clear lead in every single category - with a caveat that validators in the Prysm group have an average age of 9414 epochs, meaning that the majority in the group was not around during roughtime.</span></p><p><img src="https://i.imgur.com/Y7Nx2Hq.png" alt=""><br>
<code>epochs [8000, 14500]</code></p><p><span>To level the playing field, we also looked at the window between epochs </span><code>[8000, 14500]</code><span>, and still Prysm takes the lead - with Lighthouse a close second, showing significant improvement in the later stages of Medalla. While Lodestar ranks first on the list, we are more inclined to omit it from any conclusions as the number of observations is very small.</span></p><p><span>Another striking observation here is that in both periods, the ratio of </span><code>valuable : non-valuable attestations</code><span> for Prysm and Lighthouse is ~1, but when filtering for those validators with attestation effectiveness higher than 30 (top 10% of all validators), the ratio drops to 0.85 and 0.76 respectively!</span></p><p><img src="https://i.imgur.com/uDiehpj.png" alt=""><br>
<code>epochs [0, 14500]</code><span> &amp; </span><code>attester_effectiveness_score &gt; 30</code></p><p><span>What this implies, is that the </span><code>attestations bloat</code><span> discussed in the Aggregation section, might not be exclusively the fault of the client software and/or protocol, but also due to suboptimal </span><em><span>operator</span></em><span> configurations.</span></p><p><span>It’s either this, or the top performing operators were much more diligent with client upgrades - and later client upgrades were much more efficient with respect to broadcasting messages to the network.</span></p><p><img src="https://i.imgur.com/irges3B.png" alt=""><br>
<code>epochs [0, 14500]</code></p><p><span>A robust Phase 0 roll-out, would be a deployment with a healthy balance of validator client types accross validators. Medalla was an important lesson as to what happens when the majority of the network concentrates in one client choice. The good news here is that with validators running Lighthouse improving drastically over the 14500 epochs we looked at, Prysm’s dominance looks ready to be challenged.</span></p><p><span>At the same time, we were able to demonstrate that Prysm is the most popular client, because it is most likely the better client - all things considered. And herein lies a more fundamental issue that traces back to the protocol level.</span></p><p><span>To us, it seems as if client software development is a performance sport, because this is what the protocol rewards. Clients will find users when they help them achieve maximum rewards. But as with most performance sports, the distribution of winners and not-winners, is a power law! And when there are only a handful of categories to compete on, the power law distribution becomes less easily breakable - eventually yielding to a network concentrated around one client choice and all the systemic risks that this implies.</span></p><div class="alert alert-info">
<p><img class="emoji" alt=":bulb:" src="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/images/basic/bulb.png"><span> </span><strong><span>Key Takeaway</span></strong><span>: We feel that if client variety and a more equal distribution accross the whole network is desired, protocol designers should perhaps consider adding to the parameters that the protocol rewards for (e.g. lean attestations, better aggregation etc), so that different clients can specialize into different niches and cater to different user groups.</span></p>
</div><h2 id="Conclusion" data-id="Conclusion"><a class="anchor hidden-xs" href="#Conclusion" title="Conclusion"><span class="octicon octicon-link"></span></a><span>Conclusion</span></h2><p><span>A world computer, a universal source of truth and an open financial system, are only valuable if they are accessible. In our humble view, accessibility is a far reaching concept that encompasses far more than just the idea of “ease of entry” into a system. Within that, we believe that an important vector of accessibility is how well a system is understood.</span></p><p><span>At the moment, as reported by </span><a href="http://glassnode.com" target="_blank" rel="noopener"><span>glassnode.com</span></a><span>, 15M ETH lives under the custody of exchanges - excluding Coinbase. The average exchange holds about 750k ETH. If our assumption about 4 “institutions” present in Medalla is correct, then further assuming that 10% of ETH held will be locked in Phase 0 implies that more than 50% of the cap necessary for Phase 0 to kick off, will be met by exchanges. We are therefore very optimistic about Phase 0’s prospects of getting off to a flying start.</span></p><p><span>At the same time, Phase 0 adoption over time - from our point of view - looks like a case of “gradually and then suddenly”. High complexity, incomplete tooling, and frozen ETH being deterring factors - although a big opportunity for the brave early adopters (reward structure).</span></p><p><span>Eth2 is complex - this together with the concentration of ETH holdings will likely lead to a relatively concentrated Phase 0 in its early stages, both on the “ETH at stake” level as well as the deeper layers of the network (infra providers, client software etc).</span></p><p><span>In order to deliver this piece of work, we were faced with a steep learining curve relating to the mechanisms that are specific to eth2. Reflecting back on the journey, we remain in awe of the outcome of years of research and probably hundreds of thousands of work-hours that some of the best and brightest in the industry have put to towards getting us here. But at the same time, we are also struck with the relative fragmentation of relevant and up-to-date information available.</span></p><p><span>We are forever thankful to all those that devoted time to help us get up that curve, and their patience with our often rudimentary questions.</span></p><p><span>In all, we hope that with this piece of work, we both made the esoteric world of eth2 Phase0 a little more accessible, and provided useful insights to everyone involved in bringing eth2 to life, and are vested in its long term success.</span></p><p><span>🌟 ROLL ON THE MAINNET 🌟</span></p><h2 id="Helpful-Resouces" data-id="Helpful-Resouces"><a class="anchor hidden-xs" href="#Helpful-Resouces" title="Helpful-Resouces"><span class="octicon octicon-link"></span></a><span>Helpful Resouces</span></h2><ul>
<li><span>Setup Ethereum 2.0 Validator Node with Lighthouse on Meddala, Goerli </span><a href="https://medium.com/coinmonks/how-to-setup-ethereum-2-0-validator-node-lighthouse-meddala-goerli-4f0b85d5c8f" target="_blank" rel="noopener"><span>[Coinmonks]</span></a></li>
<li><span>Ethereum 2.0 Phase 0 – The Beacon Chain </span><a href="https://github.com/ethereum/eth2.0-specs/blob/dev/specs/phase0/beacon-chain.md" target="_blank" rel="noopener"><span>[Github]</span></a></li>
<li><span>A note on Ethereum 2.0 attestation aggregation strategies </span><a href="https://notes.ethereum.org/@hww/aggregation" target="_blank" rel="noopener"><span>[ethereum.org]</span></a></li>
<li><span>Analysis of Eth1 data votes on Medalla </span><a href="https://github.com/ethereum/eth2.0-specs/issues/2018" target="_blank" rel="noopener"><span>[benjaminion]</span></a></li>
<li><span>Ethereum 2.0 Knowledge Base </span><a href="https://kb.beaconcha.in" target="_blank" rel="noopener"><span>[beaconcha.in]</span></a></li>
<li><span>Phase 0 design notes </span><a href="https://notes.ethereum.org/@JustinDrake/rkPjB1_xr" target="_blank" rel="noopener"><span>[Justin Drake]</span></a></li>
<li><span>Rewards and penalties on Eth2 </span><a href="https://codefi.consensys.net/blog/rewards-and-penalties-on-ethereum-20-phase-0" target="_blank" rel="noopener"><span>[Consensys Codefi]</span></a></li>
<li><span>Phase 0 for Humans </span><a href="https://notes.ethereum.org/@djrtwo/Bkn3zpwxB" target="_blank" rel="noopener"><span>[ethereum.org]</span></a></li>
<li><span>Ethereum 2.0 </span><a href="https://blog.bitmex.com/ethereum-2-0/" target="_blank" rel="noopener"><span>[Bitmex Research]</span></a></li>
<li><span>Eth2 Medalla Testnet Incident </span><a href="https://medium.com/prysmatic-labs/eth2-medalla-testnet-incident-f7fbc3cc934a" target="_blank" rel="noopener"><span>[Raul Jordan]</span></a></li>
</ul><h2 id="Acknowledgements" data-id="Acknowledgements"><a class="anchor hidden-xs" href="#Acknowledgements" title="Acknowledgements"><span class="octicon octicon-link"></span></a><span>Acknowledgements</span></h2><p><span>We would like to thank,</span></p><blockquote>
<p><span>Viktor Bunin, Sasha Semenyuk, Mark Forscher and the team at Bison Trails, Shahid Thaika, Alex Svanevik, Inan from Bitfly, Lakshman Sankar, Danny Ryan, Preston Van Loon, Raul Jordan and Andrew Tam</span></p>
</blockquote><p><span>for their help and guidance in our research!</span></p></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav">
<li class=""><a href="#Eth2-Medalla---a-data-driven-deep-dive" title="Eth2 Medalla - a data driven deep dive">Eth2 Medalla - a data driven deep dive</a><ul class="nav">
<li><a href="#Table-of-Contents" title="Table of Contents">Table of Contents</a></li>
<li><a href="#Highlights" title="Highlights">Highlights</a></li>
<li><a href="#Benchmarking-Client-Performance" title="Benchmarking Client Performance">Benchmarking Client Performance</a></li>
<li><a href="#Validator-Groupings" title="Validator Groupings">Validator Groupings</a><ul class="nav">
<li><a href="#Data-structures-in-eth2-related-to-validator-identity" title="Data structures in eth2 related to validator identity">Data structures in eth2 related to validator identity</a></li>
<li><a href="#Grouping-results" title="Grouping results">Grouping results</a></li>
</ul>
</li>
<li><a href="#Big-Picture" title="Big Picture">Big Picture</a><ul class="nav">
<li><a href="#Network-growth-over-time" title="Network growth over time">Network growth over time</a></li>
<li><a href="#Epochs-2000-to-4000-a-rough-time-for-Medalla" title="Epochs 2000 to 4000; a rough time for Medalla">Epochs 2000 to 4000; a rough time for Medalla</a></li>
<li><a href="#Slashings" title="Slashings">Slashings</a></li>
<li><a href="#Defining-normality-missed-to-proposed-blocks" title="Defining normality: missed-to-proposed blocks">Defining normality: missed-to-proposed blocks</a></li>
</ul>
</li>
<li><a href="#Network-Health" title="Network Health">Network Health</a><ul class="nav">
<li><a href="#Aggregate-inclusion-delay" title="Aggregate inclusion delay">Aggregate inclusion delay</a></li>
<li><a href="#Detected-to-total-slashable-offences" title="Detected to total slashable offences">Detected to total slashable offences</a></li>
<li><a href="#Finality-distance" title="Finality distance">Finality distance</a></li>
</ul>
</li>
<li><a href="#Aggregation-Performance" title="Aggregation Performance">Aggregation Performance</a><ul class="nav">
<li><a href="#Committee-growth-over-time" title="Committee growth over time">Committee growth over time</a></li>
<li><a href="#Attestations-included-on-chain" title="Attestations included on-chain">Attestations included on-chain</a></li>
</ul>
</li>
<li><a href="#Validator-Effectiveness" title="Validator Effectiveness">Validator Effectiveness</a><ul class="nav">
<li><a href="#Proposer-effectiveness" title="Proposer effectiveness">Proposer effectiveness</a></li>
<li><a href="#Attester-effectiveness" title="Attester effectiveness">Attester effectiveness</a></li>
</ul>
</li>
<li><a href="#Conclusion" title="Conclusion">Conclusion</a></li>
<li class=""><a href="#Helpful-Resouces" title="Helpful Resouces">Helpful Resouces</a></li>
<li><a href="#Acknowledgements" title="Acknowledgements">Acknowledgements</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;" null null>
        <div class="toc"><ul class="nav">
<li class=""><a href="#Eth2-Medalla---a-data-driven-deep-dive" title="Eth2 Medalla - a data driven deep dive">Eth2 Medalla - a data driven deep dive</a><ul class="nav">
<li><a href="#Table-of-Contents" title="Table of Contents">Table of Contents</a></li>
<li><a href="#Highlights" title="Highlights">Highlights</a></li>
<li><a href="#Benchmarking-Client-Performance" title="Benchmarking Client Performance">Benchmarking Client Performance</a></li>
<li><a href="#Validator-Groupings" title="Validator Groupings">Validator Groupings</a><ul class="nav">
<li><a href="#Data-structures-in-eth2-related-to-validator-identity" title="Data structures in eth2 related to validator identity">Data structures in eth2 related to validator identity</a></li>
<li><a href="#Grouping-results" title="Grouping results">Grouping results</a></li>
</ul>
</li>
<li><a href="#Big-Picture" title="Big Picture">Big Picture</a><ul class="nav">
<li><a href="#Network-growth-over-time" title="Network growth over time">Network growth over time</a></li>
<li><a href="#Epochs-2000-to-4000-a-rough-time-for-Medalla" title="Epochs 2000 to 4000; a rough time for Medalla">Epochs 2000 to 4000; a rough time for Medalla</a></li>
<li><a href="#Slashings" title="Slashings">Slashings</a></li>
<li><a href="#Defining-normality-missed-to-proposed-blocks" title="Defining normality: missed-to-proposed blocks">Defining normality: missed-to-proposed blocks</a></li>
</ul>
</li>
<li><a href="#Network-Health" title="Network Health">Network Health</a><ul class="nav">
<li><a href="#Aggregate-inclusion-delay" title="Aggregate inclusion delay">Aggregate inclusion delay</a></li>
<li><a href="#Detected-to-total-slashable-offences" title="Detected to total slashable offences">Detected to total slashable offences</a></li>
<li><a href="#Finality-distance" title="Finality distance">Finality distance</a></li>
</ul>
</li>
<li><a href="#Aggregation-Performance" title="Aggregation Performance">Aggregation Performance</a><ul class="nav">
<li><a href="#Committee-growth-over-time" title="Committee growth over time">Committee growth over time</a></li>
<li><a href="#Attestations-included-on-chain" title="Attestations included on-chain">Attestations included on-chain</a></li>
</ul>
</li>
<li><a href="#Validator-Effectiveness" title="Validator Effectiveness">Validator Effectiveness</a><ul class="nav">
<li><a href="#Proposer-effectiveness" title="Proposer effectiveness">Proposer effectiveness</a></li>
<li><a href="#Attester-effectiveness" title="Attester effectiveness">Attester effectiveness</a></li>
</ul>
</li>
<li><a href="#Conclusion" title="Conclusion">Conclusion</a></li>
<li class=""><a href="#Helpful-Resouces" title="Helpful Resouces">Helpful Resouces</a></li>
<li><a href="#Acknowledgements" title="Acknowledgements">Acknowledgements</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
